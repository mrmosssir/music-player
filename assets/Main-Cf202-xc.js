import{j as e,I as h,u as x,a as u,L as b,D as g,s as w,b as j,r as d,c as p,g as y,d as N,e as k}from"./index-BYbEQyub.js";import{l as v,A as P}from"./AuthGroup-BN_I23_x.js";const M=a=>{const i={backgroundImage:`url("${a.image}")`};return e.jsxs("div",{className:"relative rounded-lg h-80 mt-6 overflow-hidden",children:[e.jsx("div",{className:"w-full h-full bg-cover bg-center bg-no-repeat blur-lg absolute top-0 left-0 z-0 before:block before:w-full before:h-full before:bg-black/50 before:blur-lg before:absolute before:top-0 before:left-0",style:i}),e.jsx("img",{className:"block h-full absolute top-0 left-1/2 translate-x-[-50%]",src:a.image,alt:""}),e.jsxs("div",{className:"absolute bottom-0 w-full h-24 px-10 flex justify-between items-center bg-linear-to-b from-transparent to-black-500",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white",children:a.name}),e.jsx("small",{className:"block text-white/50 text-xs mt-1",children:a.artist})]}),e.jsx("button",{className:"w-9 h-9 rounded-full bg-linear-to-b from-secondary-100 to-primary-400 z-10",children:e.jsx(h,{icon:"play",width:10,height:10,alt:"播放",className:"block mx-auto"})})]})]})},m=a=>{const i=x(),l=u(t=>t.music.current),o=async t=>{if(t.id===l?.id){i(w(!l.isPlaying));return}const n=t.url||URL.createObjectURL(await t.method());i(j({...t,url:n,isPlaying:!0}))},r=t=>{switch(t.type){case"local":o(t);break;case"album":case"playlist":window.open(t.url,"_blank");break}};return e.jsxs("div",{className:"mt-8 opacity-100 transition duration-300",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-2xl text-white",children:a.title}),a.link&&e.jsx(b,{to:a.link,className:"text-sm text-secondary",children:"更多"})]}),e.jsx("ul",{className:"w-full flex items-center gap-x-1 whitespace-nowrap overflow-x-auto mt-3 lg:gap-x-4",children:a.list.map((t,n)=>{const c=l?.id===t.id&&l?.isPlaying;return e.jsxs("li",{className:"mr-4 lg:mr-0 min-w-34 w-34 aspect-square",children:[e.jsxs("div",{className:"w-full h-rull relative aspect-square",onClick:()=>r(t),children:[t?.image?e.jsx("img",{src:t.image,alt:t.name,className:"w-full h-full object-cover rounded"}):e.jsx(g,{}),e.jsx("div",{className:`w-full h-full absolute top-0 left-0 bg-black/70 flex justify-center items-center opacity-0 hover:opacity-100 rounded cursor-pointer transition ${l?.id===t.id?"opacity-100":""}`,children:e.jsx("div",{className:"w-12 h-12 border border-white rounded-full flex justify-center items-center",children:e.jsx(h,{icon:c?"pause":"play",alt:"player icon",width:c?14:16,height:c?14:16,className:c?"":"ml-0.5"})})})]}),e.jsx("p",{className:"text-sm text-white truncate mt-2 whitespace-nowrap",children:t.name}),e.jsx("small",{className:"text-xs text-white/50 truncate mt-2 whitespace-nowrap",children:t?.artist})]},n)})})]})},D=()=>{const a=x(),i=u(s=>s.auth.user),l=u(s=>s.auth.token),o=u(s=>s.music.local),[r,t]=d.useState([]),[n,c]=d.useState([]);return d.useEffect(()=>{l&&(p.get("login")&&!i||(y(l,i?.country).then(s=>t(s)),N(l,i?.country).then(s=>c(s)),v().then(s=>a(k(s)))))},[l,i]),e.jsxs("div",{className:"min-h-full w-6/7 mx-auto py-10 lg:w-4/5",children:[e.jsx(P,{title:"每日精選",subTitle:"Daily Featured"}),e.jsx(M,{image:r[0]?.image,name:r[0]?.name,artist:r[0]?.artist}),o.length>0&&e.jsx(m,{title:"我的音樂",list:o}),e.jsx(m,{title:"最新專輯",list:r.filter((s,f)=>f>0),link:"/"}),e.jsx(m,{title:"推薦歌單",list:n,link:"/"})]})};export{D as default};
